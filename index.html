<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Invitation Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Great+Vibes&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

  <!-- html2canvas for download -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <style>
    .draggable {
      cursor: move;
      position: absolute;
      user-select: none;
    }
  </style>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col items-center p-4">

  <!-- CONTROLS -->
  <div class="w-full max-w-5xl bg-white p-4 rounded shadow mb-6 grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">

    <select id="type" class="border p-2 rounded">
      <option value="wedding">Wedding</option>
      <option value="birthday">Birthday</option>
      <option value="baby">Baby Shower</option>
      <option value="graduation">Graduation</option>
    </select>

    <select id="color" class="border p-2 rounded">
      <option value="#fdf6f0">Cream</option>
      <option value="#f0f4ff">Soft Blue</option>
      <option value="#fff0f6">Blush Pink</option>
      <option value="#f4fff0">Mint</option>
    </select>

    <select id="font" class="border p-2 rounded">
      <option value="Playfair Display">Playfair</option>
      <option value="Great Vibes">Script</option>
      <option value="Montserrat">Modern</option>
    </select>

    <button onclick="download()" class="bg-black text-white rounded px-3 py-2">
      Download
    </button>
  </div>

  <!-- INVITATION CANVAS -->
  <div id="canvas"
       class="relative bg-[#fdf6f0] w-[360px] h-[520px] md:w-[420px] md:h-[600px] rounded-[32px] shadow-lg overflow-hidden">

    <!-- Decorative icons -->
    <div id="icons" class="absolute inset-0 pointer-events-none opacity-80"></div>

    <!-- TEXT -->
    <div class="draggable text-center top-10 w-full font-serif text-xl" data-role="welcome">
      Welcome
    </div>

    <div class="draggable text-center top-24 w-full font-bold text-3xl" data-role="names">
      Sarah & Ahmed
    </div>

    <div class="draggable text-center bottom-20 w-full text-sm" data-role="details">
      Saturday Â· June 22 Â· 7 PM<br/>Royal Hall
    </div>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const icons = document.getElementById('icons');

    // Drag logic
    document.querySelectorAll('.draggable').forEach(el => {
      el.onmousedown = e => {
        const shiftX = e.clientX - el.getBoundingClientRect().left;
        const shiftY = e.clientY - el.getBoundingClientRect().top;

        function move(x, y) {
          el.style.left = x - shiftX + 'px';
          el.style.top = y - shiftY + 'px';
        }

        function onMove(e) {
          move(e.pageX - canvas.offsetLeft, e.pageY - canvas.offsetTop);
        }

        document.addEventListener('mousemove', onMove);
        document.onmouseup = () => {
          document.removeEventListener('mousemove', onMove);
          document.onmouseup = null;
        };
      };
    });

    // Change color
    document.getElementById('color').onchange = e => {
      canvas.style.background = e.target.value;
    };

    // Change font
    document.getElementById('font').onchange = e => {
      canvas.style.fontFamily = e.target.value;
    };

    // Invitation type icons
    document.getElementById('type').onchange = e => {
      const t = e.target.value;
      icons.innerHTML = '';

      let symbol = {
        wedding: 'ğŸ’',
        birthday: 'ğŸ‚',
        baby: 'ğŸ‘¶',
        graduation: 'ğŸ“'
      }[t];

      for (let i = 0; i < 12; i++) {
        const span = document.createElement('span');
        span.innerText = symbol;
        span.style.position = 'absolute';
        span.style.fontSize = '28px';
        span.style.top = Math.random() * 100 + '%';
        span.style.left = Math.random() * 100 + '%';
        icons.appendChild(span);
      }
    };

    // Download
    function download() {
      html2canvas(canvas).then(c => {
        const a = document.createElement('a');
        a.download = 'invitation.png';
        a.href = c.toDataURL();
        a.click();
      });
    }

    // Init
    document.getElementById('type').dispatchEvent(new Event('change'));
  </script>

</body>
</html>
