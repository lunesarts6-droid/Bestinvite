<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitation Card Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://unpkg.com/react@19.2.3/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@19.2.3/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/html-to-image@1.11.13/dist/html-to-image.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Dancing+Script:wght@400;700&family=Great+Vibes&family=Montserrat:wght@300;400;700&family=Open+Sans:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        body {
            background-color: #f8f9fa;
            font-family: 'Montserrat', sans-serif;
        }
        
        /* Custom scrollbar for better UI */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #aaa;
        }
        
        [contenteditable]:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
            border-radius: 4px;
        }
        
        .invitation-card {
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        
        .ad-placeholder {
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            border: 2px dashed #ccc;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }
        
        .flower-bloom path {
            transition: all 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-in {
            animation: fadeIn 0.7s ease-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        // Types and Enums
        const InvitationType = {
            WEDDING: 'Wedding',
            BIRTHDAY: 'Birthday',
            BABY_SHOWER: 'Baby Shower',
            ENGAGEMENT: 'Engagement',
            GRADUATION: 'Graduation'
        };
        
        const InvitationSize = {
            SQUARE: 'Square (1:1)',
            PORTRAIT: 'Portrait (4:5)',
            A4: 'A4 Print',
            STORY: 'Instagram Story (9:16)'
        };
        
        const FontStyle = {
            SCRIPT: 'Script / Calligraphy',
            SERIF: 'Serif / Classic',
            SANS: 'Sans-serif / Modern'
        };
        
        const CardShape = {
            ARCH: 'Arch top',
            ROUNDED: 'Rounded rectangle',
            OVAL: 'Oval',
            HEXAGON: 'Hexagon',
            PENTAGON: 'Pointed top',
            NOTCHED: 'Notched corners',
            LEAF: 'Double pointed'
        };
        
        // Default Content
        const DEFAULT_CONTENT = {
            [InvitationType.WEDDING]: {
                header: 'JOIN US TO CELEBRATE',
                mainTitle: 'For the Wedding of',
                names: 'Alex & Jordan',
                details: 'Please join us for a ceremony of love',
                dateTime: 'Saturday, June 12th at 4:00 PM',
                location: 'The Grand Estates, Beverly Hills'
            },
            [InvitationType.BIRTHDAY]: {
                header: 'IT\'S TIME TO PARTY',
                mainTitle: 'Happy Birthday to',
                names: 'Samuel Smith',
                details: 'Celebrating 30 Years of Greatness',
                dateTime: 'Friday, Oct 20th at 8:00 PM',
                location: 'Sky Lounge, Downtown'
            },
            [InvitationType.BABY_SHOWER]: {
                header: 'A NEW ADVENTURE BEGINS',
                mainTitle: 'Baby Shower for',
                names: 'Sarah & Her Little One',
                details: 'Tiny fingers, tiny toes, a new life begins',
                dateTime: 'Sunday, May 5th at 2:00 PM',
                location: 'Garden Tea Room, East Side'
            },
            [InvitationType.ENGAGEMENT]: {
                header: 'THE ADVENTURE CONTINUES',
                mainTitle: 'Engagement Celebration of',
                names: 'Taylor & Morgan',
                details: 'He popped the question, she said YES!',
                dateTime: 'Saturday, Aug 15th at 7:00 PM',
                location: 'Riverside Bistro, Wharf'
            },
            [InvitationType.GRADUATION]: {
                header: 'THE JOURNEY HAS JUST BEGUN',
                mainTitle: 'Graduation of',
                names: 'Dr. Emily Watson',
                details: 'Class of 2024 Celebration',
                dateTime: 'Monday, June 24th at 5:00 PM',
                location: 'University Hall, Campus South'
            }
        };
        
        // Size Dimensions
        const SIZE_DIMENSIONS = {
            [InvitationSize.SQUARE]: 'aspect-square',
            [InvitationSize.PORTRAIT]: 'aspect-[4/5]',
            [InvitationSize.A4]: 'aspect-[210/297]',
            [InvitationSize.STORY]: 'aspect-[9/16]'
        };
        
        // Decorative Icon Component
        const DecorativeIcon = ({ type, color }) => {
            const commonProps = { width: "100%", height: "100%", fill: color };
            
            switch (type) {
                case InvitationType.WEDDING:
                    return (
                        <svg viewBox="0 0 24 24" {...commonProps}>
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                        </svg>
                    );
                case InvitationType.BIRTHDAY:
                    return (
                        <svg viewBox="0 0 24 24" {...commonProps}>
                            <path d="M12 18c-3.31 0-6-2.69-6-6 0-1.25.38-2.4 1.03-3.35l-.03-.03 5-5 5 5-.03.03c.65.95 1.03 2.1 1.03 3.35 0 3.31-2.69 6-6 6zM12 2c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1V3c0-.55-.45-1-1-1z" />
                        </svg>
                    );
                default:
                    return (
                        <svg viewBox="0 0 24 24" {...commonProps}>
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                        </svg>
                    );
            }
        };
        
        // Controls Component
        const Controls = ({ settings, setSettings, onGenerate }) => {
            return (
                <div className="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Event Type</label>
                            <select 
                                value={settings.type}
                                onChange={(e) => setSettings({...settings, type: e.target.value})}
                                className="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-300 focus:border-pink-400 transition-all"
                            >
                                {Object.values(InvitationType).map(type => (
                                    <option key={type} value={type}>{type}</option>
                                ))}
                            </select>
                        </div>
                        
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Card Size</label>
                            <select 
                                value={settings.size}
                                onChange={(e) => setSettings({...settings, size: e.target.value})}
                                className="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-300 focus:border-pink-400 transition-all"
                            >
                                {Object.values(InvitationSize).map(size => (
                                    <option key={size} value={size}>{size}</option>
                                ))}
                            </select>
                        </div>
                        
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Font Style</label>
                            <select 
                                value={settings.fontStyle}
                                onChange={(e) => setSettings({...settings, fontStyle: e.target.value})}
                                className="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-300 focus:border-pink-400 transition-all"
                            >
                                {Object.values(FontStyle).map(style => (
                                    <option key={style} value={style}>{style}</option>
                                ))}
                            </select>
                        </div>
                        
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Card Shape</label>
                            <select 
                                value={settings.shape}
                                onChange={(e) => setSettings({...settings, shape: e.target.value})}
                                className="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-300 focus:border-pink-400 transition-all"
                            >
                                {Object.values(CardShape).map(shape => (
                                    <option key={shape} value={shape}>{shape}</option>
                                ))}
                            </select>
                        </div>
                    </div>
                    
                    <div className="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Background</label>
                            <input 
                                type="color" 
                                value={settings.bgColor}
                                onChange={(e) => setSettings({...settings, bgColor: e.target.value})}
                                className="w-full h-10 rounded-lg cursor-pointer"
                            />
                        </div>
                        
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input 
                                type="color" 
                                value={settings.textColor}
                                onChange={(e) => setSettings({...settings, textColor: e.target.value})}
                                className="w-full h-10 rounded-lg cursor-pointer"
                            />
                        </div>
                        
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input 
                                type="color" 
                                value={settings.accentColor}
                                onChange={(e) => setSettings({...settings, accentColor: e.target.value})}
                                className="w-full h-10 rounded-lg cursor-pointer"
                            />
                        </div>
                        
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Layer Color</label>
                            <input 
                                type="color" 
                                value={settings.layerColor}
                                onChange={(e) => setSettings({...settings, layerColor: e.target.value})}
                                className="w-full h-10 rounded-lg cursor-pointer"
                            />
                        </div>
                    </div>
                    
                    <div className="mt-6 flex justify-center">
                        <button 
                            onClick={onGenerate}
                            className="bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 text-white font-semibold py-3 px-8 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 flex items-center gap-2"
                        >
                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                            Generate New Invitation
                        </button>
                    </div>
                </div>
            );
        };
        
        // Invitation Canvas Component
        const InvitationCanvas = ({ settings, content, setContent, canvasRef }) => {
            const getFontFamily = () => {
                switch(settings.fontStyle) {
                    case FontStyle.SCRIPT: return "'Dancing Script', cursive";
                    case FontStyle.SERIF: return "'Cinzel', serif";
                    case FontStyle.SANS: return "'Montserrat', sans-serif";
                    default: return "'Cinzel', serif";
                }
            };
            
            return (
                <div 
                    ref={canvasRef}
                    className="invitation-card bg-white rounded-2xl shadow-xl p-8 relative overflow-hidden"
                    style={{
                        backgroundColor: settings.bgColor,
                        color: settings.textColor,
                        fontFamily: getFontFamily(),
                        maxWidth: '800px',
                        width: '100%'
                    }}
                >
                    {/* Decorative Elements */}
                    <div 
                        className="absolute top-0 left-0 right-0 h-4"
                        style={{ backgroundColor: settings.accentColor, opacity: 0.2 }}
                    />
                    
                    <div 
                        className="absolute bottom-0 left-0 right-0 h-4"
                        style={{ backgroundColor: settings.accentColor, opacity: 0.2 }}
                    />
                    
                    {/* Editable Content */}
                    <div className="relative z-10 space-y-6 text-center">
                        <h3 
                            contentEditable
                            className="text-lg uppercase tracking-widest opacity-80"
                            onBlur={(e) => setContent({...content, header: e.target.textContent})}
                            suppressContentEditableWarning={true}
                        >
                            {content.header}
                        </h3>
                        
                        <h1 
                            contentEditable
                            className="text-5xl font-bold"
                            style={{ color: settings.accentColor }}
                            onBlur={(e) => setContent({...content, mainTitle: e.target.textContent})}
                            suppressContentEditableWarning={true}
                        >
                            {content.mainTitle}
                        </h1>
                        
                        <h2 
                            contentEditable
                            className="text-6xl font-bold mt-8 mb-8"
                            onBlur={(e) => setContent({...content, names: e.target.textContent})}
                            suppressContentEditableWarning={true}
                        >
                            {content.names}
                        </h2>
                        
                        <p 
                            contentEditable
                            className="text-xl italic"
                            onBlur={(e) => setContent({...content, details: e.target.textContent})}
                            suppressContentEditableWarning={true}
                        >
                            {content.details}
                        </p>
                        
                        <div className="pt-8 border-t border-current border-opacity-20">
                            <p 
                                contentEditable
                                className="text-2xl font-semibold"
                                onBlur={(e) => setContent({...content, dateTime: e.target.textContent})}
                                suppressContentEditableWarning={true}
                            >
                                {content.dateTime}
                            </p>
                            
                            <p 
                                contentEditable
                                className="text-xl mt-4"
                                onBlur={(e) => setContent({...content, location: e.target.textContent})}
                                suppressContentEditableWarning={true}
                            >
                                {content.location}
                            </p>
                        </div>
                    </div>
                    
                    {/* Decorative Icon */}
                    <div className="absolute top-4 right-4 w-16 h-16 opacity-20">
                        <DecorativeIcon type={settings.type} color={settings.accentColor} />
                    </div>
                </div>
            );
        };
        
        // Download Buttons Component
        const DownloadButtons = ({ canvasRef }) => {
            const handleDownload = (format) => {
                if (!canvasRef.current) return;
                
                if (format === 'png') {
                    htmlToImage.toPng(canvasRef.current)
                        .then(function (dataUrl) {
                            const link = document.createElement('a');
                            link.download = 'invitation.png';
                            link.href = dataUrl;
                            link.click();
                        })
                        .catch(function (error) {
                            console.error('Error downloading image:', error);
                            alert('Error downloading image. Please try again.');
                        });
                }
            };
            
            return (
                <div className="mt-8 flex flex-wrap gap-4 justify-center">
                    <button 
                        onClick={() => handleDownload('png')}
                        className="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-3 px-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 flex items-center gap-2"
                    >
                        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        Download as PNG
                    </button>
                </div>
            );
        };
        
        // Ad Placeholder Component
        const AdPlaceholder = ({ label, className }) => {
            return (
                <div className={`ad-placeholder rounded-xl ${className}`}>
                    <div className="text-center">
                        <div className="text-xs font-semibold mb-1">ADVERTISEMENT</div>
                        <div className="text-sm">{label}</div>
                    </div>
                </div>
            );
        };
        
        // Main App Component
        const App = () => {
            const [settings, setSettings] = useState({
                type: InvitationType.WEDDING,
                size: InvitationSize.SQUARE,
                bgColor: '#ffffff',
                textColor: '#2d3436',
                accentColor: '#e84393',
                layerColor: '#fce4ec',
                fontStyle: FontStyle.SERIF,
                shape: CardShape.ARCH
            });
            
            const [invitation, setInvitation] = useState(null);
            const canvasRef = useRef(null);
            
            const handleGenerate = () => {
                setInvitation(DEFAULT_CONTENT[settings.type]);
            };
            
            useEffect(() => {
                if (invitation) {
                    setInvitation(DEFAULT_CONTENT[settings.type]);
                }
            }, [settings.type]);
            
            return (
                <div className="min-h-screen flex flex-col font-sans text-gray-900 bg-[#fdfdfd]">
                    {/* Header Ad */}
                    <div className="container mx-auto pt-4 px-4">
                        <AdPlaceholder label="Header Leaderboard Ad (728x90)" className="h-24" />
                    </div>
                    
                    <header className="py-8 px-4 text-center">
                        <h1 className="text-4xl font-extrabold text-pink-600 tracking-tight flex items-center justify-center gap-3">
                            <svg className="w-10 h-10" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z" />
                            </svg>
                            Invitation Card Studio
                        </h1>
                        <p className="text-gray-500 mt-2 max-w-xl mx-auto">
                            Create professional, elegant invitation cards in seconds. Simply choose your theme, edit the text, and download your high-resolution design.
                        </p>
                    </header>
                    
                    <main className="flex-grow container mx-auto px-4 pb-12">
                        {/* Top Section: Controls */}
                        <Controls 
                            settings={settings} 
                            setSettings={setSettings} 
                            onGenerate={handleGenerate} 
                        />
                        
                        {/* Ad below controls */}
                        <div className="my-8">
                            <AdPlaceholder label="Below Controls Banner Ad" className="h-20" />
                        </div>
                        
                        {/* Bottom Section: Preview Area */}
                        <div className="mt-12 min-h-[500px] flex flex-col items-center justify-center border-t border-gray-100 pt-12 bg-[#fafafa] rounded-3xl">
                            {invitation ? (
                                <div className="w-full flex flex-col items-center animate-in">
                                    <div className="mb-6 text-center">
                                        <p className="text-xs uppercase tracking-widest text-pink-500 font-bold mb-1">Preview</p>
                                        <p className="text-sm text-gray-500 italic">Click any text on the card to edit it directly!</p>
                                    </div>
                                    
                                    <InvitationCanvas 
                                        settings={settings} 
                                        content={invitation} 
                                        setContent={setInvitation}
                                        canvasRef={canvasRef}
                                    />
                                    
                                    <DownloadButtons canvasRef={canvasRef} />
                                </div>
                            ) : (
                                <div className="text-center p-12 bg-white rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center gap-4">
                                    <div className="w-20 h-20 bg-pink-50 rounded-full flex items-center justify-center text-pink-300">
                                        <svg className="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                        </svg>
                                    </div>
                                    <p className="text-xl font-medium text-gray-400">Your invitation will appear here</p>
                                    <button 
                                        onClick={handleGenerate}
                                        className="mt-2 text-pink-500 hover:text-pink-600 font-semibold underline underline-offset-4"
                                    >
                                        Click Generate to start
                                    </button>
                                </div>
                            )}
                        </div>
                    </main>
                    
                    {/* Footer Ad */}
                    <div className="container mx-auto pb-4 px-4">
                        <AdPlaceholder label="Footer Banner Ad" className="h-24" />
                    </div>
                    
                    <footer className="py-6 border-t border-gray-100 text-center text-gray-400 text-sm">
                        &copy; {new Date().getFullYear()} Invitation Card Studio &bull; Professional Designs Made Easy
                    </footer>
                </div>
            );
        };
        
        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
